package temp;
import java.io.*;
import java.util.*;
import java.sql.*;
public class Backup {
	public static void main(String args[])
	{
		Scanner sc = new Scanner(System.in);
		System.out.println("Enter SQL Path");
		String mysqlpath =sc.nextLine();
		System.out.println("My SQL user :");
        String mysqluser =sc.nextLine();
        System.out.println("My SQL password :");
        String mysqlpass=sc.next();
        System.out.println("Database Name :");
        String dbname=sc.next();
        System.out.println("Backup Path :");
        String backuppath=sc.next();
        System.out.println("Backupfile :");
        String backupfile=sc.next();
        try{
        	Class.forName("com.mysql.jdbc.Driver");
        	Connection con =DriverManager.getConnection("jdbc:mysql://localhost:3306/"+dbname,mysqluser,mysqlpass);
        	FileWriter fos = new FileWriter(backuppath +"\\mycmd.bat");
        	String cmd = "set path=%path%;" +mysqlpath+";\n";
        	cmd+="mysqldump -u"+mysqluser+" -p"+mysqlpass+" "+dbname+">"+backuppath+"\\"+backupfile;
        	fos.write(cmd);
        	fos.close();
        	Runtime rt= Runtime.getRuntime();
        	rt.exec("cmd.exe /c start" +backuppath+"\\mycmd.bat");
        	System.out.println("Backup Completed Successfully");
        	}
        	catch(Exception e){
        	e.printStackTrace();
        	        }
	}
}
